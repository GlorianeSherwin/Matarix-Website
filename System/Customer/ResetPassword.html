<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>MATARIX - Reset Password</title>
    
    <!-- Bootstrap 4 CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.2/css/bootstrap.min.css">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../Customer_assets/css/ForgotPassword.css">
    <!-- Mobile Enhancements CSS -->
    <link href="../Customer_assets/css/mobile-enhancements.css" rel="stylesheet">
</head>
<body>
    <!-- Skip to Content Link (Accessibility) -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <!-- Main Content Start -->
    <main id="main-content">
    <!-- Main Container -->
    <div class="main-container">
        
        <!-- Company Logo and Header Section -->
        <div class="header-section">
            <!-- Company Logo -->
            <img src="../Customer_assets/images/MATARIX_logo.png" alt="MATARIX Logo" class="company-logo">
            
            <!-- Company Tagline -->
            <p class="company-tagline">Construction Supply Materials</p>
        </div>

        <!-- Main Reset Password Card -->
        <div class="forgot-password-card">
            
            <!-- Shield Icon -->
            <div class="shield-icon-container">
                <img src="../Admin_assets/images/Security logo.png" alt="Security Shield" class="shield-icon">
            </div>

            <!-- Card Title -->
            <h2 class="card-title">Reset Password</h2>
            
            <!-- Card Subtitle/Description -->
            <p class="card-description">
                Enter your new password below.<br>
                Make sure it's at least 8 characters long.
            </p>

            <!-- Error/Success Message -->
            <div id="resetMessage" class="alert" style="display: none; margin-bottom: 20px;"></div>

            <!-- Password Input Section -->
            <div class="email-input-section">
                <!-- Password Input Label -->
                <label for="password-input" class="email-label">New Password</label>
                
                <!-- Password Input Field -->
                <div class="password-input-wrapper">
                    <input 
                        type="password" 
                        id="password-input" 
                        class="email-input password-field" 
                        placeholder="Enter your new password"
                        minlength="8"
                    >
                    <button type="button" class="password-toggle-btn" data-target="#password-input" aria-label="Show password">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                
                <!-- Password Input Helper Text -->
                <p class="email-helper-text">Password must be at least 8 characters long.</p>
            </div>

            <!-- Confirm Password Input Section -->
            <div class="email-input-section" style="margin-top: 20px;">
                <!-- Confirm Password Input Label -->
                <label for="confirm-password-input" class="email-label">Confirm Password</label>
                
                <!-- Confirm Password Input Field -->
                <div class="password-input-wrapper">
                    <input 
                        type="password" 
                        id="confirm-password-input" 
                        class="email-input password-field" 
                        placeholder="Confirm your new password"
                        minlength="8"
                    >
                    <button type="button" class="password-toggle-btn" data-target="#confirm-password-input" aria-label="Show password">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                
                <!-- Password Match Text -->
                <small class="password-match-text" id="passwordMatchText" style="display: none;"></small>
            </div>

            <!-- Reset Password Button -->
            <button type="button" class="send-reset-btn" id="resetPasswordBtn">
                <!-- Lock Icon -->
                <i class="fas fa-lock" style="margin-right: 8px;"></i>
                Reset Password
            </button>

            <!-- Back to Login/Profile Link -->
            <a href="#" id="backLink" class="back-to-login-link">
                <!-- Back Arrow Icon -->
                <img src="../Admin_assets/images/Arrow_left.svg" alt="Back Arrow" class="back-arrow-icon">
                <span id="backLinkText">Back to Login</span>
            </a>

        </div>

        <!-- Security Notice Card -->
        <div class="security-notice-card">
            <!-- Security Icon -->
            <img src="../Admin_assets/images/Shield.png" alt="Security Notice" class="security-notice-icon">
            
            <!-- Security Notice Text -->
            <div class="security-notice-text">
                <strong>Security Notice:</strong> Password reset links expire after 1 hour. If your link has expired, please request a new one from the forgot password page.
            </div>
        </div>

        <!-- Footer Section -->
        <div class="footer-section">
            <!-- Contact Information -->
            <p class="contact-info">
                Need help? Contact us at 
                <!-- Support Email Link -->
                <a href="mailto:support@matarix.com" class="support-email">support@matarix.com</a>
                <br>
                or call us at 
                <!-- Support Phone Number -->
                <span class="support-phone">+63 2 8123 4567</span>
            </p>

            <!-- Copyright Notice -->
            <p class="copyright">
                Â© 2025 MATARIX Construction Supply Materials. All rights reserved.
            </p>
        </div>

    </div>

    <!-- Background Decorative Elements -->
    <div class="bg-decoration-left"></div>
    <div class="bg-decoration-right"></div>
    <div class="bg-decoration-bottom-left"></div>

    <!-- Bootstrap 4 JS and dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.2/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script src="../Customer_assets/js/ResetPassword.js"></script>
    
    <!-- Handle back link based on source -->
    <script>
        $(document).ready(function() {
            // Check if we came from profile page (via sessionStorage or URL)
            const urlParams = new URLSearchParams(window.location.search);
            const fromProfile = urlParams.get('from') === 'profile';
            const fromProfileStorage = sessionStorage.getItem('passwordResetFromProfile') === 'true';
            const userId = urlParams.get('user_id') || sessionStorage.getItem('user_id');
            
            if (fromProfile || fromProfileStorage) {
                // Update back link to go to profile
                const backLink = $('#backLink');
                const backLinkText = $('#backLinkText');
                
                if (userId) {
                    backLink.attr('href', `CustomerProfile.html?user_id=${userId}`);
                } else {
                    backLink.attr('href', 'CustomerProfile.html');
                }
                backLinkText.text('Back to Profile');
            } else {
                // Default to login
                $('#backLink').attr('href', 'Login.html');
            }
        });
    </script>
    </main>
    <!-- Main Content End -->
    
    <!-- Enhanced Mobile Navigation -->
    <script src="../Customer_assets/js/mobile-navigation-enhanced.js"></script>
    
    <!-- ========== MOBILE BOTTOM NAVIGATION (Simplified) ========== -->
    <nav class="mobile-bottom-nav" aria-label="Mobile Navigation">
        <a href="../index.html" class="nav-item">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </a>
        <a href="../Customer/Registration.html" class="nav-item">
            <i class="fas fa-user-plus"></i>
            <span>Sign Up</span>
        </a>
        <a href="../Customer/Login.html" class="nav-item">
            <i class="fas fa-sign-in-alt"></i>
            <span>Login</span>
        </a>
        <a href="../Customer/ForgotPassword.html" class="nav-item">
            <i class="fas fa-key"></i>
            <span>Forgot?</span>
        </a>
    </nav>
    
    <!-- ========== BACK TO TOP BUTTON ========== -->
    <button class="back-to-top" id="backToTop" aria-label="Back to top">
        <i class="fas fa-arrow-up"></i>
    </button>
    
    
</body>
</html>

