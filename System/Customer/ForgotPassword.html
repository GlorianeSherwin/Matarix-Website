<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>MATARIX - Forgot Password</title>
    
    <!-- Bootstrap 4 CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.2/css/bootstrap.min.css">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../Admin_assets/css/ForgotPassword.css">
    <!-- Mobile Enhancements CSS -->
    <link href="../Customer_assets/css/mobile-enhancements.css" rel="stylesheet">
</head>
<body>
    <!-- Skip to Content Link (Accessibility) -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <!-- Main Content Start -->
    <main id="main-content">
    <!-- Main Container -->
    <div class="main-container">
        
        <!-- Company Logo and Header Section -->
        <div class="header-section">
            <!-- Company Logo -->
            <img src="../Admin_assets/images/logo.png" alt="MATARIX Logo" class="company-logo">
            
            <!-- Company Tagline -->
            <p class="company-tagline">Construction Supply Materials</p>
        </div>

        <!-- Main Forgot Password Card -->
        <div class="forgot-password-card">
            
            <!-- Shield Icon -->
            <div class="shield-icon-container">
                <img src="../Admin_assets/images/Security logo.png" alt="Security Shield" class="shield-icon">
            </div>

            <!-- Card Title -->
            <h2 class="card-title">Forgot Password?</h2>
            
            <!-- Card Subtitle/Description -->
            <p class="card-description">
                No worries! Enter your email address and we'll<br>
                send you a link to reset your password.
            </p>

            <!-- Email Input Section -->
            <div class="email-input-section">
                <!-- Email Input Label -->
                <label for="email-input" class="email-label">Email Address</label>
                
                <!-- Email Input Field -->
                <input 
                    type="email" 
                    id="email-input" 
                    class="email-input" 
                    placeholder="Enter your email address"
                >
                
                <!-- Email Input Helper Text -->
                <p class="email-helper-text">Enter your email address associated with your Matarix account.</p>
            </div>

            <!-- Send Reset Link Button -->
            <button type="button" class="send-reset-btn" id="sendResetBtn">
                <!-- Email Icon -->
                <img src="../Admin_assets/images/Message_light.svg" alt="Email Icon" class="btn-icon">
                Send reset link
            </button>

            <!-- Back to Login/Profile Link -->
            <a href="Login.html" id="backLink" class="back-to-login-link">
                <!-- Back Arrow Icon -->
                <img src="../Admin_assets/images/Arrow_left.svg" alt="Back Arrow" class="back-arrow-icon">
                <span id="backLinkText">Back to Login</span>
            </a>

        </div>

        <!-- Security Notice Card -->
        <div class="security-notice-card">
            <!-- Security Icon -->
            <img src="../Admin_assets/images/Shield.png" alt="Security Notice" class="security-notice-icon">
            
            <!-- Security Notice Text -->
            <div class="security-notice-text">
                <strong>Security Notice:</strong> for your protection, password reset links expire after 1 hour. If you don't receive an email within a few minutes, please check your spam folder or contact support.
            </div>
        </div>

        <!-- Footer Section -->
        <div class="footer-section">
            <!-- Contact Information -->
            <p class="contact-info">
                Need help? Contact us at 
                <!-- Support Email Link -->
                <a href="mailto:support@gmail.com" class="support-email">support@gmail.com</a>
                <br>
                or call us at 
                <!-- Support Phone Number -->
                <span class="support-phone">+63 2 8123 4567</span>
            </p>

            <!-- Copyright Notice -->
            <p class="copyright">
                Â© 2025 MATARIX Construction Supply Materials. All rights reserved.
            </p>
        </div>

    </div>

    <!-- Background Decorative Elements -->
    <div class="bg-decoration-left"></div>
    <div class="bg-decoration-right"></div>
    <div class="bg-decoration-bottom-left"></div>

    <!-- Bootstrap 4 JS and dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.2/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script src="../Admin_assets/js/ForgotPassword.js"></script>
    
    <!-- Handle back link based on source - Must run after Admin ForgotPassword.js -->
    <script>
        // Use setTimeout to ensure this runs after all other scripts
        setTimeout(function() {
            const backLink = $('#backLink');
            
            // Check if we came from profile page
            const urlParams = new URLSearchParams(window.location.search);
            const fromProfile = urlParams.get('from') === 'profile';
            const userId = urlParams.get('user_id');
            
            if (fromProfile) {
                // Store in sessionStorage so ResetPassword page can also use it
                sessionStorage.setItem('passwordResetFromProfile', 'true');
                if (userId) {
                    sessionStorage.setItem('user_id', userId);
                }
                
                // Update back link to go to profile
                const backLinkText = $('#backLinkText');
                
                if (userId) {
                    backLink.attr('href', `CustomerProfile.html?user_id=${userId}`);
                } else {
                    backLink.attr('href', 'CustomerProfile.html');
                }
                backLinkText.text('Back to Profile');
            } else {
                // Clear the flag if not from profile
                sessionStorage.removeItem('passwordResetFromProfile');
                // Force to Customer Login (same directory, so just Login.html)
                // Use absolute path to ensure it's correct
                const currentPath = window.location.pathname;
                const basePath = currentPath.substring(0, currentPath.lastIndexOf('/'));
                backLink.attr('href', 'Login.html');
            }
        }, 50);
    </script>
    </main>
    <!-- Main Content End -->
    
    <!-- Enhanced Mobile Navigation -->
    <script src="../Customer_assets/js/mobile-navigation-enhanced.js"></script>
    
    <!-- ========== MOBILE BOTTOM NAVIGATION (Simplified) ========== -->
    <nav class="mobile-bottom-nav" aria-label="Mobile Navigation">
        <a href="../index.html" class="nav-item">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </a>
        <a href="../Customer/Registration.html" class="nav-item">
            <i class="fas fa-user-plus"></i>
            <span>Sign Up</span>
        </a>
        <a href="../Customer/Login.html" class="nav-item">
            <i class="fas fa-sign-in-alt"></i>
            <span>Login</span>
        </a>
        <a href="../Customer/ForgotPassword.html" class="nav-item active">
            <i class="fas fa-key"></i>
            <span>Forgot?</span>
        </a>
    </nav>
    
    <!-- ========== BACK TO TOP BUTTON ========== -->
    <button class="back-to-top" id="backToTop" aria-label="Back to top">
        <i class="fas fa-arrow-up"></i>
    </button>
    
    
</body>
</html>